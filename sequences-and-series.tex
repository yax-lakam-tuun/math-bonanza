\chapter{Sequences and series}

\begin{definition}[Sequence]
    A sequence $a_n$ assigns each natural number $n$ a value of the codomain or destination set X.
    \begin{equation}
        a:\N \rightarrow \mathbb{X}
    \end{equation}
    The start index can vary. Sometimes the indices start with zero where appropriate.
\end{definition}

\begin{definition}[Limit of a sequence]
    Let $a_n$ be a sequence. 
    $a_n$ converges to a given limit $a$ if for a given \emph{arbitrary} $n_0 \in \N$ 
    there is an $\epsilon>0$, so that:
    \begin{equation}
        |a_n - a| < \epsilon \quad \forall n \ge n_0, n \in \N
    \end{equation}
    For this test the limit $a$ has to be known.
\end{definition}

\begin{definition}[Harmonic series]
    The harmonic series is the sum of all fractions.
    \begin{equation}
        \sum_{n=1}^{\infty}\frac{1}{n} = 
            1 + 
            \frac{1}{2} + 
            \frac{1}{3} + \frac{1}{4} + 
            \frac{1}{5} + \frac{1}{6} + \frac{1}{7} + \frac{1}{8} + ...
    \end{equation}
\end{definition}

\begin{theorem}[Divergence of the harmonic series]
    The harmonic series is divergent. At one can right
    \begin{equation}
        \lim_{n\to\infty}\sum_{n=1}^{\infty}\frac{1}{n} = \infty
    \end{equation}
\end{theorem}
\begin{proof}
    The harmonic series can be written as
    \begin{equation}
        \sum_{n=1}^{\infty}\frac{1}{n} = 1 + \sum_{n=2}^{\infty}\frac{1}{n}
    \end{equation}
    Looking at the second term, one gets:
    \begin{equation}
        \sum_{n=2}^{\infty}\frac{1}{n} = 
            \frac{1}{2} + 
            \frac{1}{3} + \frac{1}{4} + 
            \frac{1}{5} + \frac{1}{6} + \frac{1}{7} + \frac{1}{8} + ...
    \end{equation}
    Obviously, this series gets bigger and bigger with every iteration.
    To proof divergence it is enough to show that a series exists which is always increasing 
    but smaller than the harmonic series.
    If it is possible to show divergence for the smaller series,
    then the harmonic series has to be divergent as-well.

    The idea to construct a series like described above, is, to always group fractions.
    A new group starts when the next $2^n$ fraction is reached.
    Then, all fraction within the group get the denominator replaced with the greatest denominator 
    of that group:
    \begin{equation}
        \begin{split}
            \sum_{n=2}^{\infty}\frac{1}{n} & = 
            \frac{1}{2}
            + \left(\frac{1}{3} + \frac{1}{4}\right) 
            + \left(\frac{1}{5} + \frac{1}{6} + \frac{1}{7} + \frac{1}{8}\right) + \\
            & \left(\frac{1}{9} + \frac{1}{10} + \frac{1}{11} + \frac{1}{12} + \frac{1}{13} + 
            \frac{1}{14} + \frac{1}{15} + \frac{1}{16}\right) + ... \\
            & \ge \frac{1}{2} 
                  + \left(\frac{1}{4} + \frac{1}{4}\right)
                  + \left(\frac{1}{8} + \frac{1}{8} + \frac{1}{8} + \frac{1}{8}\right) + \\
            &     \left(\frac{1}{16} + \frac{1}{16} + \frac{1}{16} + \frac{1}{16} + \frac{1}{16} + 
                          \frac{1}{16} + \frac{1}{16} + \frac{1}{16}\right) + ... \\
            & = \frac{1}{2} + \frac{1}{2} + \frac{1}{2} + \frac{1}{2} + ...
        \end{split}
    \end{equation}
    By doing this, the divergence becomes obvious. This approach can be further formalized:
    \begin{equation}
        \sum_{n=2}^{\infty}\frac{1}{n} = \sum_{n=0}^{\infty}\sum_{i=1}^{2^n}\frac{1}{2^n+i}
    \end{equation}
    Since 
    \begin{equation}
        2^{n+1} \ge 2^n+i \Rightarrow \frac{1}{2^n+i} \ge \frac{1}{2^{n+1}} \quad \forall i \in \left[1...2^n\right], n \in \N
    \end{equation}
    one can conclude:
    \begin{equation}
        \sum_{n=2}^{\infty}\frac{1}{n} = \sum_{n=0}^{\infty}\sum_{i=1}^{2^n}\frac{1}{2^n+i}
            \ge \sum_{n=0}^{\infty}\sum_{i=1}^{2^n}\frac{1}{2^{n+1}}
            = \sum_{n=0}^{\infty}\frac{2^n}{2^{n+1}} = \sum_{n=0}^{\infty}\frac{1}{2} \to \infty
    \end{equation}
    The sum on the right side of the greater equal sign is increasing and always smaller than 
    left part.
    Yet, the right part is obviously divergent, then so is the left part.
    Therefore, the harmonic series is also divergent:
    \begin{equation}
        \sum_{n=1}^{\infty}\frac{1}{n} = 1 + \sum_{n=2}^{\infty}\frac{1}{n} \to \infty
    \end{equation}
\end{proof}

\begin{definition}[Geometric series]
    The geometric series is defined:
    \begin{equation}
        \sum_{i=0}^{n}q^i = 1 + q + q^2 + q^3 + ... + q^n
    \end{equation}
\end{definition}

\begin{lemma}
    \begin{equation}
        \sum_{i=0}^{n}q^i = \frac{q^{n+1}-1}{q-1} = \frac{1-q^{n+1}}{1-q}
    \end{equation}
\end{lemma}
\begin{proof}
    Proof is given by mathematical induction.

    \emph{Base case:} For n = 1 that's clearly true.
    \begin{equation}
        \sum_{i=0}^{1}q^i = 1 + q = \frac{1-q^2}{1-q} = \frac{(1-q)(1q1)}{1-q} = 1 + q 
    \end{equation}
    
    \emph{Induction requirement}: The equation is valid for n.

    \emph{Induction step:} 
    \begin{equation}
        \begin{split}
            \sum_{i=0}^{n+1}q^i & = q^{n+1} + \sum_{i=0}^{n}q^i \\
                                & = q^{n+1} + \frac{1 - q^{n+1}}{1-q} \\
                                & = \frac{q^{n+1}(1-q) + 1 - q^{n+1}}{1-q} \\
                                & = \frac{q^{n+1} - q^{n+2} + 1 - q^{n+1}}{1-q} \\
                                & = \frac{1 - q^{n+2}}{1-q}
        \end{split}
    \end{equation}
\end{proof}

\begin{lemma}
    Let $|q| < 1$, then
    \begin{equation}
        \lim_{n \to \infty}\sum_{i=0}^{n}q^i = \frac{1}{1-q}
    \end{equation}
\end{lemma}
\begin{proof}
    An important step is to show is $\lim_{n \to \infty}q^n = 0$.
    To do that, the following relation has to be proven $|q|^{n} < |q|^{n-1}$.
    This can be achieved by mathematical induction.

    \emph{Base case:} For n = 1 that's clearly true since this part of prerequisites.
    \begin{equation}
        |q|^1 = |q| < 1 = |q|^0
    \end{equation}

    \emph{Induction requirement}: The equation is valid for n.

    \emph{Induction step:} 
    \begin{equation}
        |q|^{n+1} = |q|^n \cdot q < |q|^{n-1} \cdot q = |q|^n 
    \end{equation}
    Let $\epsilon = |q|^n|$, then
    \begin{equation}
        |q^{n+1}-0| = |q^{n+1}| < |q|^n = \epsilon \quad \forall n \in \N
    \end{equation}
    So, $q^n$ converges according to Cauchy's convergence test and 
    thus $\lim_{n \to \infty}q^n = 0$.
    Then, the geometric series converges as-well.
    \begin{equation}
        \lim_{n \to \infty}\sum_{i=0}^{n}q^i = \lim_{n \to \infty}\frac{1-q^{n+1}}{1-q}
                                             = \frac{1-0}{1-q}
                                             = \frac{1}{1-q}
    \end{equation}
\end{proof}

\begin{lemma}
    \begin{equation}
        \sum_{i=1}^{n} = \frac{n(n+1)(2n+1)}{6}
    \end{equation}
\end{lemma}
\begin{proof}
    Proof is given by mathematical induction.
    
    \emph{Base case:} For n = 1 that's clearly true.
    \begin{equation}
        \sum_{i=1}^{1}i^2 = 1 = \frac{1\cdot(1+1)\cdot(2\cdot1+1)}{6} = \frac{2\cdot3}{6} = 1
    \end{equation}

    \emph{Induction requirement}: The equation is valid for n.

    \emph{Induction step:} 
    \begin{equation}
        \begin{split}
            \sum_{i=1}^{n+1}i^2 & = \sum_{i=1}^{n}i^2 + (n+1)^2 \\
                                & = \frac{n(n+1)(2n+1)}{6} + (n+1)^2 \\
                                & = \frac{n(n+1)(2n+1) + 6(n+1)^2}{6}  \\
                                & = \frac{(n+1)(n(2n+1) + 6(n+1))}{6}  \\
                                & = \frac{(n+1)(2n^2+7n + 6)}{6} = \frac{(n+1)(2n^2+3n+4n+6)}{6} \\
                                & = \frac{(n+1)(n+2)(2n+3)}{6}  \\
                                & = \frac{(n+1)(n+2)(2(n+1)+1)}{6}
        \end{split}
    \end{equation}
\end{proof}